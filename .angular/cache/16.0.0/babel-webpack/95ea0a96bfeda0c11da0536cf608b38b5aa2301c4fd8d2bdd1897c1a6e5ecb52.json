{"ast":null,"code":"import { Mark } from './../types';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"./tile.component\";\nfunction BoardComponent_tr_1_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"app-tile\", 1);\n    i0.ɵɵlistener(\"click\", function BoardComponent_tr_1_td_1_Template_app_tile_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const x_r5 = restoredCtx.index;\n      const y_r2 = i0.ɵɵnextContext().index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.setMark(x_r5, y_r2));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const mark_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", mark_r4);\n  }\n}\nfunction BoardComponent_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, BoardComponent_tr_1_td_1_Template, 2, 1, \"td\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r1);\n  }\n}\nexport class BoardComponent {\n  set size(value) {\n    this._size = value;\n    this.board = this.newBoard(value.x, value.y);\n  }\n  constructor() {\n    this._size = {\n      x: 5,\n      y: 5\n    };\n    this.nextMark = Mark.O;\n    this.newBoard = (x, y) => JSON.parse(JSON.stringify(Array(y).fill(Array(x).fill(Mark.None))));\n    this.setMark = (x, y) => {\n      this.board[y][x] = this.nextMark;\n      this.nextMark = this.nextMark === Mark.X ? Mark.O : Mark.X;\n    };\n    this.board = this.newBoard(5, 5);\n    this.size = {\n      x: 5,\n      y: 5\n    };\n  }\n}\nBoardComponent.ɵfac = function BoardComponent_Factory(t) {\n  return new (t || BoardComponent)();\n};\nBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BoardComponent,\n  selectors: [[\"app-board\"]],\n  inputs: {\n    size: \"size\"\n  },\n  decls: 2,\n  vars: 1,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"click\"]],\n  template: function BoardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\");\n      i0.ɵɵtemplate(1, BoardComponent_tr_1_Template, 2, 1, \"tr\", 0);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.board);\n    }\n  },\n  dependencies: [i1.NgForOf, i2.TileComponent],\n  styles: [\"[_nghost-%COMP%]   table[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  border-collapse: collapse;\\n  table-layout: fixed;\\n}\\n\\n[_nghost-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  border: 1px solid black;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZ2FtZS9ib2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7QUFBUjs7QUFHTTtFQUNFLHVCQUFBO0FBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICA6aG9zdCB0YWJsZSB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgIHRhYmxlLWxheW91dDogZml4ZWQ7XG4gICAgICB9XG5cbiAgICAgIDpob3N0IHRhYmxlIHRkIHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICB9XG4gICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAAA,SAASA,IAAI,QAAQ,YAAY;;;;;;;IAQzBC,EAAA,CAAAC,cAAA,SAA4C;IAGxCD,EAAA,CAAAE,UAAA,mBAAAC,4DAAA;MAAA,MAAAC,WAAA,GAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,IAAA,GAAAH,WAAA,CAAAI,KAAA;MAAA,MAAAC,IAAA,GAAAT,EAAA,CAAAU,aAAA,GAAAF,KAAA;MAAA,MAAAG,MAAA,GAAAX,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAY,WAAA,CAAAD,MAAA,CAAAE,OAAA,CAAAN,IAAA,EAAAE,IAAA,CAAa;IAAA,EAAC;IACtBT,EAAA,CAAAc,YAAA,EAAW;;;;IAFZd,EAAA,CAAAe,SAAA,GAAc;IAAdf,EAAA,CAAAgB,UAAA,UAAAC,OAAA,CAAc;;;;;IAHpBjB,EAAA,CAAAC,cAAA,SAA6C;IAC3CD,EAAA,CAAAkB,UAAA,IAAAC,iCAAA,gBAKK;IACPnB,EAAA,CAAAc,YAAA,EAAK;;;;IANkBd,EAAA,CAAAe,SAAA,GAAQ;IAARf,EAAA,CAAAgB,UAAA,YAAAI,MAAA,CAAQ;;;AAwBrC,OAAM,MAAOC,cAAc;EAEzB,IACIC,IAAIA,CAACC,KAA+B;IACtC,IAAI,CAACC,KAAK,GAAGD,KAAK;IAClB,IAAI,CAACE,KAAK,GAAG,IAAI,CAACC,QAAQ,CAACH,KAAK,CAACI,CAAC,EAAEJ,KAAK,CAACK,CAAC,CAAC;EAC9C;EAMAC,YAAA;IAXQ,KAAAL,KAAK,GAA6B;MAAEG,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAC,CAAE;IAShD,KAAAE,QAAQ,GAAS/B,IAAI,CAACgC,CAAC;IAO/B,KAAAL,QAAQ,GAAG,CAACC,CAAS,EAAEC,CAAS,KAAKI,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACC,KAAK,CAACP,CAAC,CAAC,CAACQ,IAAI,CAACD,KAAK,CAACR,CAAC,CAAC,CAACS,IAAI,CAACrC,IAAI,CAACsC,IAAI,CAAC,CAAC,CAAC,CAAC;IAExG,KAAAxB,OAAO,GAAG,CAACc,CAAS,EAAEC,CAAS,KAAI;MACjC,IAAI,CAACH,KAAK,CAACG,CAAC,CAAC,CAACD,CAAC,CAAC,GAAG,IAAI,CAACG,QAAQ;MAEhC,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACA,QAAQ,KAAK/B,IAAI,CAACuC,CAAC,GAAGvC,IAAI,CAACgC,CAAC,GAAGhC,IAAI,CAACuC,CAAC;IAC5D,CAAC;IAVC,IAAI,CAACb,KAAK,GAAG,IAAI,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAChC,IAAI,CAACJ,IAAI,GAAG;MAAEK,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAC,CAAE;EAC5B;;AAfWP,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAkB,SAAA;EAAAC,MAAA;IAAAlB,IAAA;EAAA;EAAAmB,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MA1BvB9C,EAAA,CAAAC,cAAA,YAAO;MACLD,EAAA,CAAAkB,UAAA,IAAA8B,4BAAA,gBAOK;MACPhD,EAAA,CAAAc,YAAA,EAAQ;;;MARcd,EAAA,CAAAe,SAAA,GAAU;MAAVf,EAAA,CAAAgB,UAAA,YAAA+B,GAAA,CAAAtB,KAAA,CAAU","names":["Mark","i0","ɵɵelementStart","ɵɵlistener","BoardComponent_tr_1_td_1_Template_app_tile_click_1_listener","restoredCtx","ɵɵrestoreView","_r7","x_r5","index","y_r2","ɵɵnextContext","ctx_r6","ɵɵresetView","setMark","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","mark_r4","ɵɵtemplate","BoardComponent_tr_1_td_1_Template","row_r1","BoardComponent","size","value","_size","board","newBoard","x","y","constructor","nextMark","O","JSON","parse","stringify","Array","fill","None","X","selectors","inputs","decls","vars","consts","template","BoardComponent_Template","rf","ctx","BoardComponent_tr_1_Template"],"sourceRoot":"","sources":["/home/nikodem/projects/school/src/app/game/board.component.ts"],"sourcesContent":["import { Mark } from './../types';\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-board',\n  template: `\n    <table>\n      <tr *ngFor=\"let row of board; let y = index\">\n        <td *ngFor=\"let mark of row; let x = index\">\n          <app-tile\n            [value]=\"mark\"\n            (click)=\"setMark(x, y)\"\n            ></app-tile>\n        </td>\n      </tr>\n    </table>\n  `,\n  styles: [\n    `\n    :host table {\n        width: 100%;\n        height: 100%;\n        border-collapse: collapse;\n        table-layout: fixed;\n      }\n\n      :host table td {\n        border: 1px solid black;\n      }\n    `,\n  ],\n})\nexport class BoardComponent {\n  private _size: { x: number; y: number } = { x: 5, y: 5 };\n  @Input()\n  set size(value: { x: number; y: number }) {\n    this._size = value;\n    this.board = this.newBoard(value.x, value.y);\n  }\n\n  protected board: Array<Array<Mark>>\n\n  private nextMark: Mark = Mark.O;\n\n  constructor() {\n    this.board = this.newBoard(5, 5);\n    this.size = { x: 5, y: 5 }\n  }\n\n  newBoard = (x: number, y: number) => JSON.parse(JSON.stringify(Array(y).fill(Array(x).fill(Mark.None))))\n\n  setMark = (x: number, y: number) => {\n    this.board[y][x] = this.nextMark;\n\n    this.nextMark = this.nextMark === Mark.X ? Mark.O : Mark.X;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}