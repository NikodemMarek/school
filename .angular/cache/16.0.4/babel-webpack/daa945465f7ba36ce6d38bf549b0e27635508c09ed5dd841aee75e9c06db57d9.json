{"ast":null,"code":"import * as xml2js from 'xml2js';\nconst DATA_URL = 'https://mendela.pl/ap_kli/czasopisma.xml';\nclass Czasopisma {\n  constructor(http) {\n    this.http = http;\n    this.czasopisma = null;\n    this.get = () => {\n      console.log(this.czasopisma);\n      return this.czasopisma;\n    };\n    this.load = () => this.http.get(DATA_URL, {\n      responseType: 'text'\n    }).subscribe(data => {\n      const rawCzasopisma = this.convertToJSON(data).czasopisma;\n      console.log(Object.keys(rawCzasopisma));\n      this.czasopisma = Object.keys(rawCzasopisma).reduce((acc, key) => {\n        if (key === 'zmienne' || key === 'lata')\n          // ignore change to reduce\n          // const czasopismo = rawCzasopisma[key];\n          // console.log(czasopismo);\n          acc.push(new Czasopismo(czasopismo.name));\n      });\n      return acc;\n    }, []);\n    this.load();\n  }\n}\n;\nconvertToJSON = xml => {\n  let res = null;\n  const parser = new xml2js.Parser({\n    explicitArray: false\n  });\n  parser.parseString(xml, (err, result) => res = result);\n  return res;\n};\nclass Czasopismo {\n  constructor(name) {\n    this.name = name;\n  }\n}\nexport { Czasopisma };","map":{"version":3,"names":["xml2js","DATA_URL","Czasopisma","constructor","http","czasopisma","get","console","log","load","responseType","subscribe","data","rawCzasopisma","convertToJSON","Object","keys","reduce","acc","key","push","Czasopismo","czasopismo","name","xml","res","parser","Parser","explicitArray","parseString","err","result"],"sources":["/home/nikodem/projects/school/src/app/helpers.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport * as xml2js from 'xml2js';\n\nconst DATA_URL = 'https://mendela.pl/ap_kli/czasopisma.xml';\n\nclass Czasopisma {\n    public czasopisma: Czasopismo[] | null = null;\n    public get = () => {\n        console.log(this.czasopisma);\n        return this.czasopisma;\n    }\n\n\tconstructor(private http: HttpClient) {\n        this.load();\n    }\n\n    private load = () =>\n        this.http.get(DATA_URL, { responseType: 'text' })\n            .subscribe(data => {\n                const rawCzasopisma = this.convertToJSON(data).czasopisma\n\n                console.log(Object.keys(rawCzasopisma));\n                this.czasopisma = Object.keys(rawCzasopisma).reduce((acc, key) => {\n                    if (key === 'zmienne' || key === 'lata')\n                        // ignore change to reduce\n\n                    // const czasopismo = rawCzasopisma[key];\n                    // console.log(czasopismo);\n                    acc.push(new Czasopismo(czasopismo.name);)\n                    return acc\n                }, [])\n            });\n\n    private convertToJSON = (xml: string) => {\n        let res: any = null\n\n        const parser = new xml2js.Parser({explicitArray: false});\n        parser.parseString(xml, (err, result) => res = result);\n\n        return res;\n    }\n}\n\nclass Czasopismo {\n    constructor(public name: string) {\n\n    }\n}\n\nexport { Czasopisma };\n"],"mappings":"AACA,OAAO,KAAKA,MAAM,MAAM,QAAQ;AAEhC,MAAMC,QAAQ,GAAG,0CAA0C;AAE3D,MAAMC,UAAU;EAOfC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IANd,KAAAC,UAAU,GAAwB,IAAI;IACtC,KAAAC,GAAG,GAAG,MAAK;MACdC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACH,UAAU,CAAC;MAC5B,OAAO,IAAI,CAACA,UAAU;IAC1B,CAAC;IAMO,KAAAI,IAAI,GAAG,MACX,IAAI,CAACL,IAAI,CAACE,GAAG,CAACL,QAAQ,EAAE;MAAES,YAAY,EAAE;IAAM,CAAE,CAAC,CAC5CC,SAAS,CAACC,IAAI,IAAG;MACd,MAAMC,aAAa,GAAG,IAAI,CAACC,aAAa,CAACF,IAAI,CAAC,CAACP,UAAU;MAEzDE,OAAO,CAACC,GAAG,CAACO,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC,CAAC;MACvC,IAAI,CAACR,UAAU,GAAGU,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAI;QAC7D,IAAIA,GAAG,KAAK,SAAS,IAAIA,GAAG,KAAK,MAAM;UACnC;UAEJ;UACA;UACAD,GAAG,CAACE,IAAI,CAAC,IAAIC,UAAU,CAACC,UAAU,CAACC,IAAI,CAAC;MAAC,CAAC;MAC1C,OAAOL,GAAG;IACd,CAAC,EAAE,EAAE,CAAC;IAjBd,IAAI,CAACT,IAAI,EAAE;EACf;;AAiBU;AAEFK,aAAa,GAAIU,GAAW,IAAI;EACpC,IAAIC,GAAG,GAAQ,IAAI;EAEnB,MAAMC,MAAM,GAAG,IAAI1B,MAAM,CAAC2B,MAAM,CAAC;IAACC,aAAa,EAAE;EAAK,CAAC,CAAC;EACxDF,MAAM,CAACG,WAAW,CAACL,GAAG,EAAE,CAACM,GAAG,EAAEC,MAAM,KAAKN,GAAG,GAAGM,MAAM,CAAC;EAEtD,OAAON,GAAG;AACd,CAAC;AAGL,MAAMJ,UAAU;EACZlB,YAAmBoB,IAAY;IAAZ,KAAAA,IAAI,GAAJA,IAAI;EAEvB;;AAGJ,SAASrB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}