<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      * {
        font-family: monospace;
        font-size: xx-large;
      }
    </style>
  </head>

  <body>
    <script>
      const write = document.write.bind(document);
      const nl = () => write('<br>');

      const toComp = (dna) => dna
          .replace(/a/g, 'u')
          .replace(/t/g, 'a')
          .replace(/u/g, 't')
          .replace(/g/g, 'u')
          .replace(/c/g, 'g')
          .replace(/u/g, 'c')

      let dna = '';
      do {
        dna = prompt("Enter a DNA sequence");
      } while (!/^([atgc]{3})+$/.test(dna));

      const comp = toComp(dna);

      const format = (dna) => dna
          .toUpperCase()
          .match(/.{1,3}/g)
          .join(' ') // esthetics
          .replace(/ATG/g, '<span style="color: green; font-weight: bold;">ATG</span>')
          .replace(/TAA/g, '<span style="background-color: yellow;">TAA</span>')
          .replace(/TAG/g, '<span style="background-color: yellow;">TAG</span>')
          .replace(/TGA/g, '<span style="background-color: yellow;">TGA</span>');

      const stat = (dna) => {
        const statistics = { }
        
        dna
          .toUpperCase()
          .match(/.{1,3}/g)
          .forEach(tri => {
            if (tri in statistics) statistics[tri] ++
            else statistics[tri] = 1
          })

        return statistics;
      }

      write(dna); nl();
      write(format(dna));
      nl(); nl();
      write(format(comp)); nl();
      write(comp);

      const statistics = stat(dna);
      nl(); nl();
      let color = 'red';
      write(... Object.keys(statistics)
        .map(key => { return { tri: key, quantity: statistics[key] } })
        .sort((a, b) => b.quantity - a.quantity)
        .map((tri, index) => {
          if (index % 5 === 0) color = Math.floor(Math.random() * 16777215).toString(16);
          return `<span style="background-color: #${color}">${tri.tri} - ${tri.quantity}</span><br>`
        }));
    </script>
  </body>
</html>